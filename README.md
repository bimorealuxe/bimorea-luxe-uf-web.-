<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bimorea Luxe UF | Exklusiva Digitala Eventinbjudningar</title>
    <!-- Laddar Tailwind CSS för snabb, responsiv styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Sätter "Inter" som standardfont för hela sidan */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; /* Ljus bakgrund */
        }
        /* Ser till att sektionerna är smidiga att navigera till */
        section {
            padding-top: 2.5rem;
            padding-bottom: 2.5rem;
        }
        /* Enkel stil för AI-resultat */
        #aiResult {
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <!-- Huvudcontainer -->
    <div class="min-h-screen flex flex-col items-center p-4 sm:p-8">

        <!-- Header/Navigering -->
        <header class="w-full max-w-4xl flex justify-between items-center py-4 px-4 bg-white shadow-lg rounded-xl mb-8 sticky top-0 z-10">
            <h1 class="text-2xl sm:text-3xl font-extrabold text-gray-800">Bimorea Luxe <span class="text-indigo-600">UF</span></h1>
            <nav class="hidden sm:flex space-x-6 text-gray-600 font-medium">
                <!-- Navigationslänkar som skrollar smidigt till sektionerna -->
                <a href="#varde" class="hover:text-indigo-600 transition duration-150">Värde</a>
                <a href="#tjanster" class="hover:text-indigo-600 transition duration-150">Paket</a>
                <a href="#kontakt" class="hover:text-indigo-600 transition duration-150">Kontakt</a>
            </nav>
        </header>

        <!-- Huvudsektion (Hero) - Uppdaterad för att spegla affärsidén -->
        <main class="w-full max-w-4xl text-center mb-16">
            <div class="bg-indigo-700 text-white p-10 sm:p-16 rounded-xl shadow-2xl">
                <h2 class="text-4xl sm:text-6xl font-extrabold mb-4 leading-tight tracking-tight">
                    Exclusive Digital Event Design
                </h2>
                <p class="text-xl sm:text-2xl font-light mb-8 opacity-90">
                    Skräddarsydda digitala inbjudningar som sparar tid och hanterar era gästlistor.
                </p>
                <a href="#varde" class="inline-block px-8 py-3 bg-pink-500 text-white font-bold rounded-full text-lg shadow-md hover:shadow-xl hover:bg-pink-600 transform hover:scale-105 transition duration-300">
                    Se Hur Vi Hjälper Er
                </a>
            </div>
        </main>

        <!-- NY SEKTION: Värdeerbjudande (Viktig för affärsplanen) -->
        <section id="varde" class="w-full max-w-4xl mb-16">
            <h3 class="text-3xl font-bold text-gray-800 mb-8 text-center">Enkelt. Exklusivt. Effektivt.</h3>
            
            <div class="grid md:grid-cols-3 gap-8 text-center">
                
                <!-- Värdepunkt 1: Design & Kommunikation -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-b-4 border-indigo-400">
                    <div class="text-4xl text-indigo-600 mb-3">✉️</div>
                    <h4 class="text-xl font-bold mb-2">Unika Digitala Inbjudningar</h4>
                    <p class="text-gray-600 text-sm">Vi skapar en unik webbsida som fångar ert events anda, oavsett om det är bröllop, fest eller födelsedag. Snyggt och 100% online.</p>
                </div>

                <!-- Värdepunkt 2: Gästlistshantering -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-b-4 border-indigo-600">
                    <div class="text-4xl text-indigo-600 mb-3">✅</div>
                    <h4 class="text-xl font-bold mb-2">Smart Gästlistshantering</h4>
                    <p class="text-gray-600 text-sm">Med enkla digitala verktyg kan ni hantera O.S.A., specialkost och gästlistor utan krångel. Vi sparar er tid och frustration.</p>
                </div>

                <!-- Värdepunkt 3: Tidsbesparing & Leverans -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-b-4 border-indigo-800">
                    <div class="text-4xl text-indigo-600 mb-3">⏱️</div>
                    <h4 class="text-xl font-bold mb-2">Snabbt & Pappersfritt</h4>
                    <p class="text-gray-600 text-sm">All leverans sker snabbt och digitalt. Ni får en länk att skicka till era gäster – inget krångel med tryck eller postgång.</p>
                </div>
            </div>
        </section>

        <!-- Tjänster & Paketering - Uppdaterade för att reflektera Digitala Inbjudningssidor -->
        <section id="tjanster" class="w-full max-w-4xl mb-16">
            <h3 class="text-3xl font-bold text-gray-800 mb-8 border-b-2 pb-2 border-indigo-200">Våra Paket</h3>

            <div class="grid md:grid-cols-3 gap-6">

                <!-- Essential Paket (Digital inbjudan) -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-indigo-400">
                    <h4 class="text-2xl font-bold text-indigo-600 mb-2">Essential</h4>
                    <p class="text-gray-500 mb-4">Fokus: Enkel Digital Inbjudan</p>
                    <ul class="text-left space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> **Digital Eventinbjudningssida** (Enkel layout)</li>
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> En Revisionsomgång</li>
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> Länk för utskick</li>
                    </ul>
                </div>

                <!-- Prestige Paket (Inbjudan + OSA-funktion) -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-indigo-600">
                    <h4 class="text-2xl font-bold text-indigo-600 mb-2">Prestige</h4>
                    <p class="text-gray-500 mb-4">Fokus: Design & Gästlistshantering</p>
                    <ul class="text-left space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> **Digital Inbjudningssida** (Elegant layout)</li>
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> **Inbyggd O.S.A.-Funktion**</li>
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> Två Revisionsomgångar</li>
                    </ul>
                </div>

                <!-- Diamond Paket (Full Branding + Alla Verktyg) -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-indigo-800">
                    <h4 class="text-2xl font-bold text-indigo-600 mb-2">Diamond</h4>
                    <p class="text-gray-500 mb-4">Fokus: Komplett Eventlösning</p>
                    <ul class="text-left space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> **Digital Eventportal** (Flera sidor/sektioner)</li>
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> **O.S.A. & Frågeformulär** (t.ex. matpreferenser)</li>
                        <li class="flex items-center"><span class="text-indigo-500 mr-2">✓</span> **Två Extra Digitala Tillgångar** (t.ex. tackkort/minnesbilder)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Prissektion (Oförändrad) -->
        <section id="priser" class="w-full max-w-4xl mb-16">
            <h3 class="text-3xl font-bold text-gray-800 mb-8 border-b-2 pb-2 border-indigo-200">Prislista (Exkl. Moms)</h3>

            <div class="grid md:grid-cols-3 gap-6 text-center">
                <!-- Priskort 1 -->
                <div class="bg-white p-6 rounded-xl shadow-xl border-2 border-gray-100 transform hover:scale-105 transition duration-300">
                    <p class="text-2xl font-semibold mb-2">Essential</p>
                    <p class="text-5xl font-extrabold text-indigo-600 mb-4">85 kr</p>
                    <p class="text-sm text-gray-500 mb-6">Enkel & snabb inbjudan.</p>
                    <button onclick="visaForm('Essential')" class="w-full py-2 bg-indigo-500 text-white font-bold rounded-lg hover:bg-indigo-600 transition duration-150">Beställ Nu</button>
                </div>

                <!-- Priskort 2 (Mest Populär) -->
                <div class="bg-indigo-600 text-white p-6 rounded-xl shadow-2xl border-2 border-indigo-700 transform scale-105">
                    <p class="text-2xl font-semibold mb-2">Prestige</p>
                    <p class="text-5xl font-extrabold mb-4">99 kr</p>
                    <p class="text-sm opacity-90 mb-6">Med O.S.A.-funktion för smidig hantering.</p>
                    <button onclick="visaForm('Prestige')" class="w-full py-2 bg-white text-indigo-600 font-bold rounded-lg hover:bg-gray-100 transition duration-150 shadow-md">Beställ Nu</button>
                </div>

                <!-- Priskort 3 -->
                <div class="bg-white p-6 rounded-xl shadow-xl border-2 border-gray-100 transform hover:scale-105 transition duration-300">
                    <p class="text-2xl font-semibold mb-2">Diamond</p>
                    <p class="text-5xl font-extrabold text-indigo-600 mb-4">200 kr</p>
                    <p class="text-sm text-gray-500 mb-6">Full eventportal med alla verktyg.</p>
                    <button onclick="visaForm('Diamond')" class="w-full py-2 bg-indigo-500 text-white font-bold rounded-lg hover:bg-indigo-600 transition duration-150">Beställ Nu</button>
                </div>
            </div>
        </section>

        <!-- AI-IDÉGENERATOR (Oförändrad logik, anpassad text) -->
        <section id="ai-generator" class="w-full max-w-2xl p-8 bg-white rounded-xl shadow-2xl mb-12 border-t-4 border-pink-500">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 flex items-center justify-center">
                ✨ AI-Assisterad Eventidégenerator
            </h3>
            <p class="text-gray-600 mb-4 text-center">
                Få kreativa förslag på tema, färgpalett och stil för er digitala inbjudning innan ni beställer.
            </p>

            <div class="space-y-4">
                <div>
                    <label for="initialIdea" class="block text-sm font-medium text-gray-700 text-left">Typ av Event (t.ex. "Bröllop i rustik stil" eller "Födelsedagsfest med 2000-talstema")</label>
                    <textarea id="initialIdea" rows="2" placeholder="Skriv din idé här..."
                              class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-pink-500 focus:border-pink-500"></textarea>
                </div>

                <button id="generateButton" onclick="generateConcept()" class="w-full py-3 bg-pink-500 text-white font-bold rounded-lg shadow-lg hover:bg-pink-600 transition duration-150 transform hover:scale-105 flex items-center justify-center disabled:opacity-50" disabled>
                    <span id="buttonText">✨ Generera Designförslag</span>
                    <div id="loadingSpinner" class="hidden ml-3 spinner"></div>
                </button>
            </div>
            
            <!-- Resultatvisning -->
            <div id="aiResultContainer" class="mt-6 p-4 border border-pink-200 bg-pink-50 rounded-lg hidden">
                <h4 class="text-xl font-bold text-pink-700 mb-2">Ditt Nya Designkoncept:</h4>
                <div id="aiResult" class="whitespace-pre-wrap text-gray-700"></div>
                <button onclick="applyAiConcept()" class="mt-4 w-full py-2 bg-indigo-500 text-white font-bold rounded-lg hover:bg-indigo-600 transition duration-150">
                    Använd i Beställningsformuläret
                </button>
            </div>
             <!-- Felmeddelande-container -->
            <p id="errorBox" class="mt-4 text-center font-medium hidden text-red-500"></p>

        </section>


        <!-- Kontaktformulär/Beställning (Oförändrad) -->
        <section id="kontakt" class="w-full max-w-2xl p-8 bg-white rounded-xl shadow-2xl mb-12">
            <h3 class="text-3xl font-bold text-gray-800 mb-6">Gör Din Beställning</h3>
            <p class="text-gray-600 mb-6">Välj ditt paket ovan, så fylls formuläret i automatiskt. Vi kontaktar dig inom 24 timmar!</p>

            <form id="orderForm" class="space-y-4">
                <div>
                    <label for="package" class="block text-sm font-medium text-gray-700 text-left">Valt Paket</label>
                    <input type="text" id="package" name="package" required readonly
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-50">
                </div>
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 text-left">Ditt Namn</label>
                    <input type="text" id="name" name="name" required
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 text-left">E-post</label>
                    <input type="email" id="email" name="email" required
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <div>
                    <label for="details" class="block text-sm font-medium text-gray-700 text-left">Projektbeskrivning (Inkludera eventtyp, datum och eventuellt AI-koncept)</label>
                    <textarea id="details" name="details" rows="4" required
                              class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                </div>

                <button type="submit" class="w-full py-3 mt-4 bg-indigo-600 text-white font-bold rounded-lg shadow-lg hover:bg-indigo-700 transition duration-150 transform hover:scale-105">
                    Skicka Förfrågan
                </button>
            </form>
            <!-- Meddelanderuta som visas efter att formuläret skickats -->
            <p id="messageBox" class="mt-4 text-center font-medium hidden"></p>
        </section>

        <!-- Footer -->
        <footer class="w-full max-w-4xl border-t pt-4 text-center text-gray-500 text-sm">
            <p>&copy; 2025 Bimorea Luxe UF. All Rights Reserved. | <span class="font-bold">Org. ID:</span> [Fyll i UF-ID Här]</p>
            <p class="mt-2 text-xs">Priserna är angivna exklusive moms (UF-företag är undantagna från moms).</p>
        </footer>

    </div>

    <script>
        // --- Gemini API Setup ---
        const API_KEY = "";
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;
        const MAX_RETRIES = 5;

        // Utility function for exponential backoff
        async function exponentialBackoff(fn, retries = 0) {
            try {
                return await fn();
            } catch (error) {
                if (retries < MAX_RETRIES) {
                    const delay = Math.pow(2, retries) * 1000 + Math.random() * 1000;
                    // console.warn(`API call failed, retrying in ${delay / 1000}s...`);
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return exponentialBackoff(fn, retries + 1);
                } else {
                    console.error("Gemini API failed after multiple retries:", error);
                    throw new Error("Kunde inte ansluta till AI-tjänsten efter flera försök.");
                }
            }
        }

        // Handles the Gemini API call
        async function callGeminiApi(userQuery) {
            // Uppdaterad systemprompt för att fokusera på digitala inbjudningar och eventbranding
            const systemPrompt = "Du är en expert på exklusiv digital eventdesign och branding. Din uppgift är att ta en kort idé från kunden (t.ex. 'Bröllop') och omvandla den till en professionell, strukturerad designbrief för en digital inbjudningssida. Inkludera: 1. Tema & Känsla, 2. Färgpalett (med HEX-koder), 3. Typsnittsförslag, 4. Nödvändiga digitala element (t.ex. O.S.A.-formulär, kartfunktion). Svara alltid på svenska och använd Markdown-formattering.";
            
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const fetcher = async () => {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            };

            const result = await exponentialBackoff(fetcher);
            
            // Tar bort Markdown-kodblockets stängningar
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Kunde inte generera ett koncept. Försök igen eller ange detaljerna manuellt.";
            return text.replace(/```markdown|```/g, ''); 
        }
        
        // --- Application Logic ---
        
        const initialIdeaTextarea = document.getElementById('initialIdea');
        const generateButton = document.getElementById('generateButton');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const aiResultContainer = document.getElementById('aiResultContainer');
        const aiResultDiv = document.getElementById('aiResult');
        const errorBox = document.getElementById('errorBox');

        // Enables button if input is not empty
        initialIdeaTextarea.addEventListener('input', () => {
            generateButton.disabled = initialIdeaTextarea.value.trim().length === 0;
        });

        async function generateConcept() {
            const idea = initialIdeaTextarea.value.trim();
            if (!idea) return;

            // UI feedback: Start loading
            aiResultContainer.classList.add('hidden');
            errorBox.classList.add('hidden');
            generateButton.disabled = true;
            loadingSpinner.classList.remove('hidden');
            document.getElementById('buttonText').textContent = 'Genererar...';
            
            const userQuery = `Jag vill ha en designbrief för en digital inbjudan till ett event med temat: ${idea}.`;

            try {
                const concept = await callGeminiApi(userQuery);
                // Konverterar Markdown-resultat till HTML för bättre läsbarhet
                aiResultDiv.innerHTML = concept
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Fetstil
                    .replace(/\n/g, '<br>') // Radbrytningar
                    .replace(/<br><br><br>/g, '<br><br>'); // Undviker för många tomma rader

                aiResultContainer.classList.remove('hidden');
            } catch (error) {
                console.error(error);
                errorBox.textContent = error.message.includes('Kunde inte ansluta') ? error.message : "Ett oväntat fel uppstod vid genereringen. Försök igen.";
                errorBox.classList.remove('hidden');
            } finally {
                // UI feedback: Stop loading
                generateButton.disabled = false;
                loadingSpinner.classList.add('hidden');
                document.getElementById('buttonText').textContent = '✨ Generera Designförslag';
            }
        }
        
        // Applies the AI concept to the main order form
        function applyAiConcept() {
            const currentDetails = document.getElementById('details').value.trim();
            const aiConcept = aiResultDiv.innerText.trim();
            
            let newDetails = "--- GENERERAT KONCEPT FRÅN AI ---\n" + aiConcept;
            
            if (currentDetails) {
                newDetails = currentDetails + "\n\n--- TIDIGARE BESKRIVNING ---\n" + newDetails;
            }
            
            document.getElementById('details').value = newDetails;
            
            // Ger feedback och skrollar ner till formuläret
            errorBox.classList.remove('text-red-500');
            errorBox.classList.add('text-green-500');
            errorBox.textContent = 'Designkonceptet har lagts till i Projektbeskrivningen nedan. Komplettera med datum och personlig information!';
            errorBox.classList.remove('hidden');
            
            document.getElementById('kontakt').scrollIntoView({ behavior: 'smooth' });
        }


        // Formulärinlämning och paketval
        function visaForm(packageName) {
            document.getElementById('package').value = packageName;
            document.getElementById('kontakt').scrollIntoView({ behavior: 'smooth' });
            // Rensa eventuella felmeddelanden från AI-generatorn vid paketval
            errorBox.classList.add('hidden');
        }

        document.getElementById('orderForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const packageValue = document.getElementById('package').value;
            const messageBox = document.getElementById('messageBox');
            
            if (packageValue === 'Välj ett paket ovan') {
                messageBox.classList.remove('hidden', 'text-green-500');
                messageBox.classList.add('text-red-500');
                messageBox.textContent = 'Vänligen välj ett av paketen innan du skickar.';
                return;
            }

            messageBox.classList.remove('hidden', 'text-red-500');
            messageBox.classList.add('text-green-500');
            messageBox.textContent = 'Tack för din förfrågan! Vi har mottagit beställningen för paketet ' + packageValue + ' och kontaktar dig inom kort via e-post.';
            
            document.getElementById('orderForm').reset();
            document.getElementById('package').value = 'Välj ett paket ovan';
            
            // Återställer AI-generatorn
            initialIdeaTextarea.value = '';
            generateButton.disabled = true;
            aiResultContainer.classList.add('hidden');
            errorBox.classList.add('hidden');

        });

        // Sätter standardvärde i formulärfältet när sidan laddas
        document.getElementById('package').value = 'Välj ett paket ovan';
    </script>
    <!-- CSS för Loading Spinner -->
    <style>
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</body>
</html>
